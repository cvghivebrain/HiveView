wfcreate="bin\ffmpeg.exe" -i "{file}" -filter_complex "showwavespic=s={dim}:colors={fgcolor}" "{wfimage}"
wfchange="bin\magick.exe" mogrify -background {bgcolor} -alpha remove "{wfimage}"
wfcolors=red,black,#00FFFF,#004000
thousandseparator=,

--- Raster formats ---

[DG2 (Sega Digitizer 2; Packed Pixel)]
if:({s:0,2}="PP")&({filesize}=({w:2}*{w:4})+$206)
width={w:2}
height={w:4}
pixelstart=$206
bitspercolor=16
red=(({val}&$1F)*8)+4
green=((({val}>>5)&$1F)*8)+4
blue=(({val}>>10)*8)+4
alpha=255
palette=yes
palstart=6
palsize=256
bitsperindex=8

[RGB (Sega Saturn)]
if:{s:0,15}="SEGA 32BITGRAPH"
width={w:$18}
height={w:$1A}
pixelstart=$100
bitspercolor=24
red={val}>>16
green=({val}>>8)&$FF
blue={val}&$FF
alpha=255

[2BP (Pocket PC Bitmap)]
if:({s:0,2}="BM")&({filesize}={_d:2})&({_w:$1C}=2)
convert="bin\NConvert\nconvert.exe" -in 2bp -out png -o "{tempfile}" "{file}"

[411 (Sony Mavica)]
if:{filesize}=4608
convert="bin\NConvert\nconvert.exe" -in 411 -out png -o "{tempfile}" "{file}"

[4BT/4BIT (C64 GoDot)]
if:{s:0,4}="GOD0"
convert="bin\NConvert\nconvert.exe" -in god -out png -o "{tempfile}" "{file}"

[73I/82I/83I/85I/86I/89I/92I (Texas Instruments TI-xx calculator)]
if:{s:0,4}="**TI"
convert="bin\deark.exe" -m tivariable -t "{tempfile}" "{file}"

[A64 (C64 Wigmore Artist 64)]
if:({_w:0}=$4000)&({filesize}=$2802)
convert="bin\NConvert\nconvert.exe" -in a64 -out png -o "{tempfile}" "{file}"

[AAI (Dune HD media player)]
if:{_w:0}*{_w:4}=({filesize}-8)/4
convert="bin\magick.exe" aai:"{file}" "{tempfile}"

[ABK (AMOS Picture Bank)]
if:{s:0,4}="AmBk"
convert="bin\deark.exe" -m abk -t "{tempfile}" "{file}"

[ABK (AMOS Sprite/Icon Bank)]
if:({s:0,4}="AmSp")|({s:0,4}="AmIc")
unpack="bin\deark.exe" -m abk -o "{tempfolder}\sprite" "{file}"

[ACE (Train Simulator texture)]
if:{s:0,6}="SIMISA"
convert="bin\NConvert\nconvert.exe" -in ace -out png -o "{tempfile}" "{file}"

[ACORN (Acorn RISC OS Sprite)]
if:({d:4}=$10000000)&(({_d:8}={filesize}+4)|({_d:8}={filesize}-$80))
unpack="bin\NConvert\nconvert.exe" -in acorn -out png -o "{tempfolder}\image##.png" -xall "{file}"

[AMI (C64 Amica Paint)]
if:({_w:0}=$4000)&({w:{filesize}-2}=$C200)
convert="bin\NConvert\nconvert.exe" -in ami -out png -o "{tempfile}" "{file}"

[ANS (ANSI Art)]
if:(({s:0,6}="Date: ")&({find:$19,$A00,"(This file must be"}=-1))|({w:0}=$1B5B)|({w:2}=$1B5B)
convert="bin\deark.exe" -m ansiart -opt char:output=image -t "{tempfile}" "{file}"

[APX (Ability Office PhotoPaint)*]
if:{s:0,4}="SD3S"
convert="bin\NConvert\nconvert.exe" -in apx -out png -o "{tempfile}" "{file}"

[ART (Atari ST Art Director)]
if:{filesize}=32512
convert="bin\NConvert\nconvert.exe" -in artdir -out png -o "{tempfile}" "{file}"

[ART (PFS: First Publisher)]
if:{filesize}=(({_w:2}\16)*2*{_w:6})+8
convert="bin\NConvert\nconvert.exe" -in pfs -out png -o "{tempfile}" "{file}"

[ATK (CMU Andrew Toolkit)]
if:{s:0,10}="\begindata"
convert="bin\NConvert\nconvert.exe" -in atk -out png -o "{tempfile}" "{file}"

[AVIF (AV1 Image File Format)]
if:{s:4,8}="ftypavif"
convert="bin\avifdec.exe" "{file}" "{tempfile}"

[AVS/X (Stardent Application Visualization System)]
if:{filesize}=({d:0}*{d:4}*4)+8
convert="bin\NConvert\nconvert.exe" -in avs -out png -o "{tempfile}" "{file}"

[B&W/B_W (ImageLab/PrintTechnic)]
if:{s:0,6}="B&W256"
convert="bin\NConvert\nconvert.exe" -in ilab -out png -o "{tempfile}" "{file}"

[BFLI (C64 Big Flexible Line Interpretation)]
if:({filesize}=33795)&({t:0}=$FF3B62)
convert="bin\NConvert\nconvert.exe" -in bfli -out png -o "{tempfile}" "{file}"

[BIN (Binary Text)]
if:({s:{filesize}-128,7}="SAUCE00")&({b:{filesize}-$22}=5)
convert="bin\deark.exe" -m bintext -opt char:output=image -t "{tempfile}" "{file}"

[BLK/BSG (Prosoft Fontasy Block)]
if:{filesize}=(({_w:0}\8)*{_w:2})+4
convert="bin\NConvert\nconvert.exe" -in bsg -out png -o "{tempfile}" "{file}"

[BMP/ICO/PTR (OS/2 Bitmap Array)]
if:({s:0,2}="BA")&(({s:$E,2}="BM")|({s:$E,2}="CI")|({s:$E,2}="IC")|({s:$E,2}="CP")|({s:$E,2}="PT"))
unpack="bin\deark.exe" -m os2bmp -o "{tempfolder}\image" "{file}"

[BOB (Bob Ray Tracer Bitmap)]
if:{filesize}=({_w:0}*{_w:2})+772
convert="bin\NConvert\nconvert.exe" -in bob -out png -o "{tempfile}" "{file}"

[BPG (Better Portable Graphics)]
if:{s:0,3}="BPG"
convert="bin\libbpg\bpgdec.exe" -o "{tempfile}" "{file}"

[BTN (Just Buttons)]
if:{s:12,4}="TPF0"
convert="bin\NConvert\nconvert.exe" -in btn -out png -o "{tempfile}" "{file}"

[CAL/CT1/RAS (DoD CALS Raster)]
if:{s:0,9}="srcdocid:"
convert="bin\magick.exe" cals:"{file}" "{tempfile}"

[CAM (Casio QV-10/100 Camera)]
if:{d:0}=$7204D4D
convert="bin\NConvert\nconvert.exe" -in cam -out png -o "{tempfile}" "{file}"

[CDU (C64 CDU-Paint)]
if:({filesize}=10277)&({_w:0}=$7EEF)
convert="bin\NConvert\nconvert.exe" -in cdu -out png -o "{tempfile}" "{file}"

[CE1 (Atari ST ComputerEyes)]
if:{s:0,4}="EYES"
convert="bin\NConvert\nconvert.exe" -in ce1 -out png -o "{tempfile}" "{file}"

[CEL+KCF (Kisekae Set System Cel)]
if:{s:0,5}="KiSS "
convert="bin\NConvert\nconvert.exe" -in cel -out png -o "{tempfile}" "{file}"

[CIN (Kodak Cineon)]
if:{d:0}=$802A5FD7
convert="bin\magick.exe" cin:"{file}" "{tempfile}"

[CIP (Cisco IP Phone Image)]
if:{s:0,18}="<CiscoIPPhoneImage"
convert="bin\NConvert\nconvert.exe" -in cip -out png -o "{tempfile}" "{file}"

[CLB (CorelMOSAIC Library)]
if:{s:{b:0}-3,4}=".cdr"
unpack="bin\deark.exe" -m corel_clb -o "{tempfolder}\thumb" "{file}"

[CLP (PCPaint)]
if:({_w:0}={filesize})&({_d:0}<>{filesize})&((({b:4}R8)*{b:5})/8<>{b:6})
convert="bin\deark.exe" -m pcpaint -t "{tempfile}" "{file}"

[CLP (Windows Clipboard)]
if:{w:0}=$50C3
convert="bin\NConvert\nconvert.exe" -in clp -out png -o "{tempfile}" "{file}"

[COM (TheDraw COM File Screen Save)]
if:({t:0}=$EB3D90)|({t:0}=$EB1890)
convert="bin\deark.exe" -m thedraw_com -opt char:output=image -t "{tempfile}" "{file}"

[CR2 (Canon Digital Camera Raw)]
if:({s:0,3}="II*")&({s:8,2}="CR")
convert="bin\magick.exe" cr2:"{file}" "{tempfile}"

[CRG (Calamus Raster Graphic)]
if:{s:0,10}="CALAMUSCRG"
convert="bin\deark.exe" -m crg -t "{tempfile}" "{file}"

[CRW (Canon Digital Camera Raw)]
if:{s:6,8}="HEAPCCDR"
convert="bin\magick.exe" crw:"{file}" "{tempfile}"

[CUR (Windows Cursor)]
if:({d:0}=$200)&({b:4}>0)
unpack="bin\deark.exe" -m ico -o "{tempfolder}\cursor" "{file}"

[DB (Windows Thumbs.db Cache)]
if:({d:0}=$D0CF11E0)&(({s:$480,4,2}="256_")|(({s:$480,7,2}="Catalog")|({s:$500,7,2}="Catalog")|({s:$580,7,2}="Catalog")))
unpack="bin\deark.exe" -m cfb -opt cfb:fmt=thumbsdb -o "{tempfolder}\thumb" "{file}"

[DCM (DICOM medical image)]
if:({s:$80,4}="DICM")|(({w:0}=$800)&({b:3}=0))
convert="bin\magick.exe" convert dcm:"{file}" "{tempfile}" && "bin\NConvert\nconvert.exe" -in dicom -out png -page 1 -o "{tempfile}" "{file}"
unpack="bin\NConvert\nconvert.exe" -in dicom -out png -o "{tempfolder}\image###.png" -xall "{file}"

[DCR (Kodak DCS)]
if:{find:$1760,$17C0,"DCS Pro SLR"}>-1
convert="bin\NConvert\nconvert.exe" -in dcr -out png -o "{tempfile}" "{file}"

[DCX/FAX (ZSoft Picture Exchange)]
if:({d:0}=$B168DE3A)&({d:8}=0)
convert="bin\deark.exe" -m dcx -t "{tempfolder}\temp.pcx" "{file}" && "bin\deark.exe" -m pcx -t "{tempfile}" "{tempfolder}\temp.pcx"

[DCX/FAX (ZSoft Multi-page PCX)]
if:({d:0}=$B168DE3A)&({d:8}<>0)
unpack="bin\deark.exe" -m dcx -o "{tempfolder}\image" "{file}"

[DD (C64 Doodle)]
if:(({_w:0}=$5C00)|({_w:0}=$1C00))&({filesize}=9218)
convert="bin\NConvert\nconvert.exe" -in dd -out png -o "{tempfile}" "{file}"

[DDS (Microsoft DirectDraw Surface)]
if:{s:0,3}="DDS"
convert="bin\magick.exe" dds:"{file}" "{tempfile}"

[DGI (Digi-Pic)]
if:({filesize}=64008)&({d:$7D00}=$1040000)&({d:$7D04}=0)
convert="bin\deark.exe" -m dgi -t "{tempfile}" "{file}"

[DIB (Device-Independent Bitmap)]
if:({_d:0}+{_d:$14}={filesize})&({_w:$C}=1)
convert="bin\magick.exe" dib:"{file}" "{tempfile}"

[DOO (Atari ST Doodle)]
if:{filesize}=32000
convert="bin\deark.exe" -m doodle -t "{tempfile}" "{file}"

[DPX (SMPTE Digital Moving Picture Exchange)]
if:{s:0,4}="SDPX"
convert="bin\magick.exe" dpx:"{file}" "{tempfile}"

[DRAW (Acorn RISC OS Draw)]
if:{s:0,4}="Draw"
unpack="bin\deark.exe" -m rodraw -o "{tempfolder}\sprite" "{file}"

[DRZ/DRP (C64 Draz Paint)]
if:({_w:0}=$5800)&(({filesize}=10051)|({s:2,9}="DRAZPAINT"))
convert="bin\NConvert\nconvert.exe" -in drz -out png -o "{tempfile}" "{file}"

[EPA (Award BIOS Logo)]
if:({filesize}=({b:0}*{b:1}*15)+72)|({s:0,4}="AWBM")
convert="bin\deark.exe" -m awbm -t "{tempfile}" "{file}"

[ESM (Atari ST Enhanced Simplex)]
if:{s:0,3}="TMS"
convert="bin\NConvert\nconvert.exe" -in esm -out png -o "{tempfile}" "{file}"

[EXR (ILM OpenEXR)]
if:{s:0,3}="v/1"
convert="bin\magick.exe" exr:"{file}" "{tempfile}"

[FACE/XFACE (X-Face)]
if:{s:0,7}="X-Face:"
convert="bin\deark.exe" -m xface -t "{tempfile}" "{file}"

[FBM (Fuzzy Bitmap)]
if:{s:0,7}="%bitmap"
convert="bin\NConvert\nconvert.exe" -in fbm -out png -o "{tempfile}" "{file}" && "bin\magick.exe" mogrify -flip "{tempfile}"

[FF (Farbfeld)]
if:{s:0,8}="farbfeld"
convert="bin\magick.exe" farbfeld:"{file}" "{tempfile}"

[FGS/GIH (C64 Fun Graphics Machine/Giga-Paint)]
if:({filesize}=8002)&({_w:0}=$6000)
convert="bin\NConvert\nconvert.exe" -in gih -out png -o "{tempfile}" "{file}"

[FITS/FTS (Flexible Image Transport System)]
if:{s:0,6}="SIMPLE"
convert="bin\NConvert\nconvert.exe" -in fits -out png -o "{tempfile}" "{file}"

[FL32 (FilmLight)]
if:{s:0,4}="FL32"
convert="bin\magick.exe" fl32:"{file}" "{tempfile}"

[FLIF (Free Lossless Image Format)]
if:({s:0,4}="FLIF")&(({b:6}>$7F)&({b:8}>$7F)&({b:$A}=0))
convert="bin\flif.exe" -d "{file}" "{tempfile}"

[FP2/FUN (C64 Funpaint II)]
if:{s:2,8}="FUNPAINT"
convert="bin\NConvert\nconvert.exe" -in fp2 -out png -o "{tempfile}" "{file}"

[FPG (DIV Games Studio)]
if:{s:0,3}="fpg"
unpack="bin\NConvert\nconvert.exe" -in fpg -out png -o "{tempfolder}\image###.png" -xall "{file}"

[FPT (C64 Face Painter)]
if:({filesize}=10004)&({_w:0}=$4000)
convert="bin\NConvert\nconvert.exe" -in fpt -out png -o "{tempfile}" "{file}"

[FPX (FlashPix)]
if:{find:$920,$B20,"56616700-"}>-1
convert="bin\NConvert\nconvert.exe" -in fpx -out png -o "{tempfile}" "{file}"

[FTC (Atari Falcon True Color)]
if:{filesize}=184320
convert="bin\deark.exe" -m ftc -t "{tempfile}" "{file}"

[FXS (WinFax)]
if:{w:0}=$B23
convert="bin\NConvert\nconvert.exe" -in fxs -out png -o "{tempfile}" "{file}"

[FTXT (IFF Formatted Text)]
if:{s:8,4}="FTXT"
convert="bin\magick.exe" ftxt:"{file}" "{tempfile}"

[GBR (GIMP Brush)]
if:{s:20,4}="GIMP"
convert="bin\NConvert\nconvert.exe" -in gbr -out png -o "{tempfile}" "{file}"

[GEO/CVT (C64 GEOS geoPaint)]
if:{s:$171,8}="geoPaint"
convert="bin\NConvert\nconvert.exe" -in geo -out png -o "{tempfile}" "{file}"

[GOD (Atari Falcon GodPaint)]
if:({filesize}=153606)&({d:2}=$14000F0)
convert="bin\deark.exe" -m godpaint -t "{tempfile}" "{file}"

[GPH (PrintPartner Graphics)]
if:{s:0,16}="PrintPartner Art"
unpack="bin\deark.exe" -m pp_gph -o "{tempfolder}\gph" "{file}"

[GRB/GRO (HP-48/49 GROB)]
if:({s:0,5}="HPHP4")|({s:0,4}="GROB")|({s:$14,4}="GROB")
convert="bin\NConvert\nconvert.exe" -in grob -out png -o "{tempfile}" "{file}"

[GUN (C64 Gunpaint)]
if:({_w:0}=$4000)&({filesize}=33603)
convert="bin\NConvert\nconvert.exe" -in gun -out png -o "{tempfile}" "{file}"

[HBM/HIR (C64 Hires Bitmap)]
if:({filesize}=8002)&({_w:0}=$2000)
convert="bin\NConvert\nconvert.exe" -in hir -out png -o "{tempfile}" "{file}"

[HDR/PIC (Radiance RGBE)]
if:({s:0,10}="#?RADIANCE")|({s:0,6}="#?RGBE")|({find:0,$140,"oconv "}>-1)|({find:0,$140,"pcompos "}>-1)|({s:0,5}="VIEW=")
convert="bin\magick.exe" hdr:"{file}" "{tempfile}"

[HED (C64 Hi-Eddi)]
if:({_w:0}=$4000)&({filesize}=9218)
convert="bin\NConvert\nconvert.exe" -in hed -out png -o "{tempfile}" "{file}"

[HPI (Hemera Photo-Object)]
if:{d:0}=$89485049
convert="bin\NConvert\nconvert.exe" -in hpi -out png -o "{tempfile}" "{file}"

[HR (TRS-80 High Resolution)]
if:{filesize}=$4B00
convert="bin\NConvert\nconvert.exe" -in hr -out png -o "{tempfile}" "{file}"

[HRU (?)]
if:{s:0,5}="5KP51"
convert="bin\NConvert\nconvert.exe" -in hru -out png -o "{tempfile}" "{file}"

[HRZ (Slow-scan television)]
if:{filesize}=184320
convert="bin\magick.exe" hrz:"{file}" "{tempfile}"

[HTA (Hemera Thumbs)]
if:{d:0}=$89485441
unpack="bin\NConvert\nconvert.exe" -in hta -out png -o "{tempfolder}\image#####.png" -xall "{file}"

[ICN (HP 100LX/200LX Icon)]
if:({d:0}=$1000100)&({filesize}=(({_w:4}\8)*{_w:6})+8)
convert="bin\deark.exe" -m hpicn -t "{tempfile}" "{file}"

[ICN/TBI (Magic Desk/ToyBox Icon)]
if:({filesize}=515)&({w:0}=$1F1F)
convert="bin\deark.exe" -m mdesk_icn -t "{tempfile}" "{file}"

[ICN (RIPscrip Icon)]
if:{filesize}=((({_w:0}+1)\8)*4*({_w:2}+1))+6
convert="bin\deark.exe" -m ripicon -t "{tempfile}" "{file}"

[ICNS (Mac Icon)]
if:{s:0,4}="icns"
unpack="bin\deark.exe" -m icns -o "{tempfolder}\icon" "{file}"

[ICO (OS/2 Color Icon)]
if:({s:0,2}="CI")&({_d:$A}>{_d:2})&({_d:$A}<{filesize})
convert="bin\deark.exe" -m os2bmp -t "{tempfile}" "{file}"

[ICO (OS/2 Icon)]
if:({s:0,2}="IC")&(({_d:2}={filesize})|({_d:$A}>{_d:2}))&({_d:$A}<{filesize})
convert="bin\deark.exe" -m os2bmp -t "{tempfile}" "{file}"

[ICO (Sun Icon)]
if:{s:0,9}="/* Format"
convert="bin\NConvert\nconvert.exe" -in icon -out png -o "{tempfile}" "{file}"

[ICO (Windows Icon)]
if:({d:0}=$100)&({b:4}>0)
unpack="bin\magick.exe" ico:"{file}" "{tempfolder}\icon.png"

[IFF (CD-i IFF IMAG)]
if:({s:0,4}="FORM")&({s:8,4}="IMAG")
convert="bin\deark.exe" -m cdi_imag -t "{tempfile}" "{file}"

[IFF/TDI (Maya Image File Format/Thompson Digital Image Explore)]
if:{s:0,4}="FOR4"
convert="bin\NConvert\nconvert.exe" -in tdi -out png -o "{tempfile}" "{file}"

[IIM (Atari Falcon InShape Image)]
if:{s:0,8}="IS_IMAGE"
convert="bin\NConvert\nconvert.exe" -in iim -out png -o "{tempfile}" "{file}"

[ILBM/IFF/LBM (Amiga Interleaved Bitmap)]
if:({s:0,4}="FORM")&(({s:8,4}="ILBM")|({s:8,4}="PBM ")|({s:8,4}="ACBM"))
convert="bin\deark.exe" -m ilbm -t "{tempfile}" "{file}"

[IMG (GEM Raster)]
if:({w:0}>0)&({w:0}<=3)&({w:2}>=8)&(({w:4}=1)|({w:4}=4)|({w:4}=8))&({w:6}<=8)&({w:6}>0)
convert="bin\deark.exe" -m gemras -t "{tempfile}" "{file}"

[INFO (Amiga Icon)]
if:{w:0}=$E310
unpack="bin\deark.exe" -m amigaicon -o "{tempfolder}\icon" "{file}"

[IPH (C64 Interpaint Hires)]
if:({_w:0}=$4000)&({filesize}=9002)
convert="bin\NConvert\nconvert.exe" -in ciph -out png -o "{tempfile}" "{file}"

[IPT (C64 Interpaint)]
if:({_w:0}=$4000)&({filesize}=10003)
convert="bin\NConvert\nconvert.exe" -in cipt -out png -o "{tempfile}" "{file}"

[ISH (C64 Image System Hires)]
if:({_w:0}=$4000)&({filesize}=9194)
convert="bin\NConvert\nconvert.exe" -in cish -out png -o "{tempfile}" "{file}"

[ISM (C64 Image System)]
if:({_w:0}=$3C00)&({filesize}=10218)
convert="bin\NConvert\nconvert.exe" -in cism -out png -o "{tempfile}" "{file}"

[IWC (WaveL Wavelet Compressed Image)]
if:{s:0,3}="IWC"
convert="bin\NConvert\nconvert.exe" -in iwc -out png -o "{tempfile}" "{file}"

[J2C/J2K/JPT (JPEG 2000 codestream)]
if:{d:0}=$FF4FFF51
convert="bin\magick.exe" j2c:"{file}" "{tempfile}"

[JBF (Jasc PaintShop Pro Browser File)]
if:{s:0,15}="JASC BROWS FILE"
unpack="bin\deark.exe" -m jbf -o "{tempfolder}\thumb" "{file}"

[JBIG/JBG/BIE (Joint Bi-level Image Experts Group)]
if:{w:$12}=$31C
convert="bin\jbgtopbm.exe" "{file}" "{tempfolder}\temp.pbm" && "bin\magick.exe" "{tempfolder}\temp.pbm" "{tempfile}"

[JIF (Jeff's Image Format)]
if:{s:0,6}="JIF99a"
convert="bin\NConvert\nconvert.exe" -in jif -out png -o "{tempfile}" "{file}"

[JIG (Windows Jigsaw 2)]
if:({s:0,2}="JG")&({_d:$A}=$436)
convert="bin\NConvert\nconvert.exe" -in jig -out png -o "{tempfile}" "{file}"

[JJ (C64 Doodle compressed)]
if:({_w:0}=$5C00)&({filesize}<9218)
convert="bin\NConvert\nconvert.exe" -in jj -out png -o "{tempfile}" "{file}"

[JLS (JPEG-LS)]
if:{d:0}=$FFD8FFF7
convert="bin\locod.exe" -P "{file}" "{tempfolder}\temp.ppm" && "bin\magick.exe" "{tempfolder}\temp.ppm" "{tempfile}"

[JNG (JPEG Network Graphics)]
if:{s:1,3}="JNG"
convert="bin\magick.exe" jng:"{file}" "{tempfile}"

[JP2 (JPEG 2000)]
if:{s:4,4}="jP  "
convert="bin\magick.exe" jp2:"{file}" "{tempfile}"

[JPEG/JPG (Joint Photographic Experts Group)]
if:({t:0}=$FFD8FF)&({b:3}<>$F7)&({s:$C,3}<>"II*")&({s:$C,2}<>"MM")
convert="bin\magick.exe" jpeg:"{file}" "{tempfile}"

[JXL (JPEG XL)]
if:({w:0}=$FF0A)|({s:4,4}="JXL ")
convert="bin\libjxl\djxl.exe" "{file}" "{tempfile}"

[JXR/WPD (JPEG XR)]
if:{d:0}=$4949BC01
convert="bin\JXRDecApp.exe" -i "{file}" -o "{tempfolder}\temp.bmp" -c 0 && "bin\deark.exe" -m bmp -t "{tempfile}" "{tempfolder}\temp.bmp"

[K25 (Kodak DC25 Digital Camera)]
if:{s:$188,4}="DC25"
convert="bin\NConvert\nconvert.exe" -in k25 -out png -o "{tempfile}" "{file}"

[KDC (Kodak DC120 Digital Camera)]
if:{s:$1DC,5}="DC120"
convert="bin\NConvert\nconvert.exe" -in kdc -out png -o "{tempfile}" "{file}"

[KOA/RPM (C64 KoalaPainter/RUN Paint)]
if:({_w:0}=$6000)&({filesize}=10003)
convert="bin\NConvert\nconvert.exe" -in koa -out png -o "{tempfile}" "{file}"

[KPS (IBM KIPS Bitmap)]
if:{s:0,8}="DFIMAG00"
convert="bin\NConvert\nconvert.exe" -in kps -out png -o "{tempfile}" "{file}"

[KQP/PIC (Konica Picture Show/Pegasus PIC)]
if:({s:0,2}="BM")&({s:$1E,4}="JPEG")
convert="bin\deark.exe" -m picjpeg -t "{tempfolder}\temp.jpg" "{file}" && "bin\magick.exe" jpeg:"{tempfolder}\temp.jpg" "{tempfile}"

[LFF (LucasFilm Format)]
if:{w:0}=$80E8
convert="bin\NConvert\nconvert.exe" -in lff -out png -o "{tempfile}" "{file}"

[LGO (OS/2 Boot Logo)]
if:({_d:0}=$20)&({_d:4}>{_d:0})&({_d:4}<{filesize})&({_d:8}>{_d:0})&({_d:8}<{filesize})
convert="bin\deark.exe" -m os2bootlogo -t "{tempfile}" "{file}"

[M8 (Heretic II Mipmap)]
if:({d:0}=$2000000)&({_d:$A4}=$410)
convert="bin\NConvert\nconvert.exe" -in m8 -out png -o "{tempfile}" "{file}"

[MAC/PIC/PNTG (MacPaint)]
if:({s:$41,4}="PNTG")|((({d:0}=2)|({d:0}=3))&(({d:4}&{d:8}=$FFFFFFFF)|({d:4}|{d:8}=0)))
convert="bin\deark.exe" -m macpaint -t "{tempfile}" "{file}"

[MAG (MAKIchan Graphics)]
if:{s:0,5}="MAKI0"
convert="bin\deark.exe" -m makichan -t "{tempfile}" "{file}"

[MAP (DIV Games Studio)]
if:{s:0,3}="map"
convert="bin\NConvert\nconvert.exe" -in map -out png -o "{tempfile}" "{file}"

[MAT (MATLAB)]
if:{s:0,6}="MATLAB"
convert="bin\magick.exe" mat:"{file}" "{tempfile}"

[MBK (STOS Memory Bank)]
if:{s:0,10}="Lionpoubnk"
unpack="bin\deark.exe" -m stos -o "{tempfolder}\mbk" "{file}"

[MBM (Psion Series 5 bitmap/EPOC Multibitmap)]
if:{d:0}=$37000010
unpack="bin\NConvert\nconvert.exe" -in psion5 -out png -o "{tempfolder}\image###.png" -xall "{file}"

[MGR (ManaGeR bitmap)]
if:{s:0,2}="yz"
convert="bin\NConvert\nconvert.exe" -in mgr -out png -o "{tempfile}" "{file}"

[MIFF/MIF (Magick Multispectral Image File Format)]
if:({s:9,5}="agick")|({w:0}=$7B0A)
convert="bin\NConvert\nconvert.exe" -in miff -out png -o "{tempfile}" "{file}"

[MIL (C64 Micro Illustrator)]
if:({_w:0}=$18DC)&({filesize}=10022)
convert="bin\NConvert\nconvert.exe" -in mil -out png -o "{tempfile}" "{file}"

[MPC+CACHE (Magick Pixel Cache)]
if:{s:$A,4}="ixel"
convert="bin\magick.exe" mpc:"{file}" "{tempfile}"

[MPO (Multi Picture Object)]
if:({t:0}=$FFD8FF)&({s:6,4}="Exif")&(({s:$C,3}="II*")|({s:$C,2}="MM"))
unpack="bin\deark.exe" -m jpegscan -o "{tempfolder}\mpo" "{file}" && "bin\magick.exe" mogrify -format png "{tempfolder}\*.jpg" && cmd.exe /C del "{tempfolder}\*.jpg"

[MRW (Minolta Raw)]
if:{s:1,3}="MRM"
convert="bin\magick.exe" mrw:"{file}" "{tempfile}"

[MSP (Microsoft Paint)]
if:({s:0,4}="LinS")|({s:0,4}="DanM")
convert="bin\deark.exe" -m msp -t "{tempfile}" "{file}"

[NEO (Atari ST NEOchrome)]
if:{filesize}=32128
convert="bin\NConvert\nconvert.exe" -in neo -out png -o "{tempfile}" "{file}"

[NGG (Nokia Group Graphic)]
if:{s:0,3}="NGG"
convert="bin\NConvert\nconvert.exe" -in ngg -out png -o "{tempfile}" "{file}"

[NIE (Naïve Image Formats)]
if:{d:0}=$6EC3AF45
convert="bin\deark.exe" -m nie -t "{tempfile}" "{file}"

[NLM (Nokia Logo Manager)]
if:{s:0,4}="NLM "
convert="bin\NConvert\nconvert.exe" -in nlm -out png -o "{tempfile}" "{file}"

[NOL (Nokia Operator Logo)]
if:{s:0,3}="NOL"
convert="bin\NConvert\nconvert.exe" -in nol -out png -o "{tempfile}" "{file}"

[NPM (Nokia Picture Message)]
if:{s:0,3}="NPM"
convert="bin\deark.exe" -m npm -t "{tempfile}" "{file}"

[NSL (Nokia Startup Logo)]
if:({s:0,4}="FORM")&({s:$40,4}="NSLD")
convert="bin\deark.exe" -m nsl -t "{tempfile}" "{file}"

[NTF (National Imagery Transmission Format)]
if:{s:0,4}="NITF"
convert="bin\NConvert\nconvert.exe" -in nitf -out png -o "{tempfile}" "{file}"

[OCP (C64 Advanced OCP Art Studio)]
if:({filesize}=10018)&({_w:0}=$2000)
convert="bin\NConvert\nconvert.exe" -in ocp -out png -o "{tempfile}" "{file}"

[ORF (Olympus Raw)]
if:({s:0,4}="IIRO")|({s:0,4}="MMOR")|({s:0,4}="IIRS")
convert="bin\magick.exe" orf:"{file}" "{tempfile}"

[OTB (Nokia Over the Air Bitmap)]
if:(({b:0}=$10)&({b:5}=1)&(((({w:1}*{w:3})\8)+6)={filesize}))|(({b:0}=0)&({b:3}=1)&(((({b:1}*{b:2})\8)+4)={filesize}))
convert="bin\magick.exe" otb:"{file}" "{tempfile}"

[P64 (C64 Picasso 64)]
if:({_w:0}=$1800)&({filesize}=10050)
convert="bin\NConvert\nconvert.exe" -in p64 -out png -o "{tempfile}" "{file}"

[P7 (XV Visual Schnauzer thumbnail)]
if:{s:0,6}="P7 332"
convert="bin\NConvert\nconvert.exe" -in p7 -out png -o "{tempfile}" "{file}"

[PAC/SEQ (Atari ST STAD)]
if:({s:0,4}="pM86")|({s:0,4}="pM85")
convert="bin\NConvert\nconvert.exe" -in stad -out png -o "{tempfile}" "{file}"

[PALM (Palm Bitmap)]
if:({b:8}<=1)&({b:9}&$7F<=3)&(({w:0}\8)R2={w:4})&({w:0}*{w:2}*{w:4}<>0)&({w:2}<1000)
unpack="bin\deark.exe" -m palmbitmap -o "{tempfolder}\palm" "{file}"

[PALM (Palm Bitmap)]
if:({b:8}=2)&({b:9}&$7F<=3)&(({w:0}\4)R2={w:4})&({w:0}*{w:2}*{w:4}<>0)&({w:2}<1000)
unpack="bin\deark.exe" -m palmbitmap -o "{tempfolder}\palm" "{file}"

[PALM (Palm Bitmap)]
if:({b:8}=4)&({b:9}&$7F<=3)&(({w:0}\2)R2={w:4})&({w:0}*{w:2}*{w:4}<>0)&({w:2}<1000)
unpack="bin\deark.exe" -m palmbitmap -o "{tempfolder}\palm" "{file}"

[PALM (Palm Bitmap)]
if:({b:8}=8)&({b:9}&$7F<=3)&({w:0}R2={w:4})&({w:0}*{w:2}*{w:4}<>0)&({w:2}<1000)
unpack="bin\deark.exe" -m palmbitmap -o "{tempfolder}\palm" "{file}"

[PALM (Palm Bitmap)]
if:({b:8}=16)&({b:9}&$7F<=3)&({w:0}*2={w:4})&({w:0}*{w:2}*{w:4}<>0)&({w:2}<1000)
unpack="bin\deark.exe" -m palmbitmap -o "{tempfolder}\palm" "{file}"

[PAM (Portable Arbitrary Map)]
if:({s:0,2}="P7")&({b:2}=$A)
convert="bin\magick.exe" pam:"{file}" "{tempfile}"

[PAT (GIMP Pattern)]
if:{s:20,4}="GPAT"
convert="bin\NConvert\nconvert.exe" -in gpat -out png -o "{tempfile}" "{file}"

[PAT (MegaPaint Pattern)]
if:{s:1,4}="PAT "
convert="bin\deark.exe" -m megapaint_pat -t "{tempfile}" "{file}"

[PBM (Netpbm Portable Bitmap)]
if:(({s:0,2}="P1")|({s:0,2}="P2")|({s:0,2}="P3")|({s:0,2}="P4")|({s:0,2}="P5")|({s:0,2}="P6"))&(({b:2}=$A)|({b:2}=$20))
convert="bin\magick.exe" "{file}" "{tempfile}"

[PCD (Photo CD)]
if:{s:$800,7}="PCD_IPI"
convert="bin\magick.exe" pcd:"{file}" "{tempfile}"

[PCX (ZSoft Picture Exchange)]
if:({b:0}=$A)&({b:1}<6)&({b:2}<2)
convert="bin\deark.exe" -m pcx -t "{tempfile}" "{file}"

[PDB (Palm Database ImageViewer)]
if:{s:$3C,4}="vIMG"
convert="bin\magick.exe" pdb:"{file}" "{tempfile}"

[PDS (Planetary Data System)]
if:({s:0,11}="NJPL1I00PDS")|({s:2,11}="NJPL1I00PDS")
convert="bin\NConvert\nconvert.exe" -in pds -out png -o "{tempfile}" "{file}"

[PEF (Pentax Raw)]
if:({d:0}=$4D4D002A)&({find:$E0,$140,"PENTAX"}>-1)
convert="bin\magick.exe" pef:"{file}" "{tempfile}"

[PFM (Portable Float Map)]
if:(({s:0,2}="PF")|({s:0,2}="Pf"))&(({b:2}=$A)|({b:2}=$20))
convert="bin\magick.exe" pfm:"{file}" "{tempfile}"

[PGC (Atari Portfolio Graphics Compressed)]
if:{t:0}=$504701
convert="bin\NConvert\nconvert.exe" -in pgc -out png -o "{tempfile}" "{file}"

[PGF (Atari Portfolio Graphics)]
if:{filesize}=1920
convert="bin\deark.exe" -m pf_pgf -t "{tempfile}" "{file}"

[PHM (Portable Half Float Map)]
if:(({s:0,2}="PH")|({s:0,2}="Ph"))&(({b:2}=$A)|({b:2}=$20))
convert="bin\magick.exe" phm:"{file}" "{tempfile}"

[PI (C64 Blazing Paddles)]
if:({filesize}=10242)&({_w:0}=$A000)
convert="bin\NConvert\nconvert.exe" -in pi -out png -o "{tempfile}" "{file}"

[PI1/PI2/PI3 (Atari ST DEGAS)]
if:(({filesize}=32034)|({filesize}=32066))&({w:0}<3)
convert="bin\NConvert\nconvert.exe" -in degas -out png -o "{tempfile}" "{file}"

[PI4 (Atari Falcon Fuckpaint)]
if:{filesize}=77824
convert="bin\deark.exe" -m fpaint_pi4 -t "{tempfile}" "{file}"

[PI4 (Atari ST View ST/TT)]
if:({filesize}=154114)&({w:0}=7)
convert="bin\NConvert\nconvert.exe" -in degas -out png -o "{tempfile}" "{file}"

[PI5 (Atari ST View ST/TT)]
if:({filesize}=153634)&({w:0}=4)
convert="bin\NConvert\nconvert.exe" -in degas -out png -o "{tempfile}" "{file}"

[PI7 (Atari ST View ST/TT)]
if:{filesize}=308224
convert="bin\deark.exe" -m atari_pi7 -t "{tempfile}" "{file}"

[PI9 (Atari Falcon Fuckpaint)]
if:{filesize}=65024
convert="bin\deark.exe" -m fpaint_pi9 -t "{tempfile}" "{file}"

[PIC (Autodesk Softimage)]
if:({d:0}=$5380F634)&({s:$58,4}="PICT")
convert="bin\NConvert\nconvert.exe" -in soft -out png -o "{tempfile}" "{file}"

[PIC/PCT/PIX (BSAVE/BLOAD)]
if:({t:0}=$FD00B8)&(({_w:5}+7={filesize})|({_w:5}+8={filesize}))
convert="bin\deark.exe" -m bsave -t "{tempfile}" "{file}"

[PIC/PCT/PIX (BSAVE Compressed)]
if:({t:0}=$FD00B8)&({_w:5}=0)
convert="bin\deark.exe" -m bsave_cmpr -t "{tempfolder}\temp.pic" "{file}" && "bin\deark.exe" -m bsave -t  "{tempfile}" "{tempfolder}\temp.pic"

[PIC (Dr. Halo)]
if:({s:0,2}="AH")&({b:6}=2)
convert="bin\deark.exe" -m drhalopic -t "{tempfile}" "{file}"

[PIC (PCPaint)]
if:({_w:0}=$1234)&({b:11}=$FF)
convert="bin\deark.exe" -m pcpaint -t "{tempfile}" "{file}"

[PIC (Psion Series 3 bitmap)]
if:({s:0,3}="PIC")&({s:4,2}="00")&({_w:6}=1)
convert="bin\deark.exe" -m psionpic -t "{tempfile}" "{file}"

[PIC (Psion Series 3 bitmap)]
if:({s:0,3}="PIC")&({s:4,2}="00")&({_w:6}>1)
unpack="bin\deark.exe" -m psionpic -o "{tempfolder}\pic" "{file}"

[PIC/CAP/TEM (PC Storyboard)]
if:({s:0,6}="EP_CAP")|(({b:2}=$C1)&({b:1}>=$84)&({b:1}<=$86)&({b:4}=0))
convert="bin\deark.exe" -m storyboard -t "{tempfile}" "{file}"

[PIC (WinMiPS)]
if:{filesize}=({_w:$44}*{_w:$46}*2)+$122
convert="bin\NConvert\nconvert.exe" -in winm -out png -o "{tempfile}" "{file}"

[PIX (Alias PIX)]
if:({d:4}=0)&({w:8}&$EF=8)&({w:0}*{w:2}>0)&({w:0}<$2000)&({w:2}<$2000)
convert="bin\NConvert\nconvert.exe" -in alias -out png -o "{tempfile}" "{file}"

[PIX (Esm Software PIX)]
if:{s:0,16}="Esm Software PIX"
convert="bin\sfk.exe" partcopy "{file}" -allfrom 21 "{tempfolder}\temp.jpg" -yes && "bin\magick.exe" jpeg:"{tempfolder}\temp.jpg" "{tempfile}" && cmd.exe /C del "{tempfolder}\temp.jpg"

[PIX (Inset)]
if:({_w:0}=3)&({_d:8}+{_w:6}={_d:$10})
convert="bin\deark.exe" -m insetpix -t "{tempfile}" "{file}"

[PKM (GrafX2)]
if:{s:0,3}="PKM"
convert="bin\deark.exe" -m pkm -t "{tempfile}" "{file}"

[PMG (C64 Paint Magic)]
if:({_w:0}=$3F8E)&({filesize}=$2474)
convert="bin\NConvert\nconvert.exe" -in pmg -out png -o "{tempfile}" "{file}"

[PMP (Sony DSC-F1)]
if:{filesize}={d:8}+{d:$C}
convert="bin\NConvert\nconvert.exe" -in pmp -out png -o "{tempfile}" "{file}"

[PNG (Portable Network Graphics)]
if:({s:1,3}="PNG")&({find:$25,$80,"acTL"}=-1)
convert=open

[PNT (Atari ST Prism Paint/TruePaint)]
if:{s:0,3}="PNT"
convert="bin\deark.exe" -m prismpaint -t "{tempfile}" "{file}"

[PNT (DeskMate Paint)]
if:{s:1,3}="PNT"
convert="bin\deark.exe" -m deskmate_pnt -t "{tempfile}" "{file}"

[POG+PNM (The New Print Shop)]
if:({d:0}=1)&({d:4}=0)&({filesize}=({_w:8}*$23C)+$A)
unpack="bin\deark.exe" -m newprintshop -o "{tempfolder}\pog" "{file}" -file2 "{filenoext}.pnm"

[PSF (ArcSoft PhotoStudio)]
if:{s:0,4}="FSPA"
convert="bin\NConvert\nconvert.exe" -in psf -out png -o "{tempfile}" "{file}"

[PTR (OS/2 Pointer)]
if:({s:0,2}="CP")&({_d:$A}>{_d:2})&({_d:$A}<{filesize})
convert="bin\deark.exe" -m os2bmp -t "{tempfile}" "{file}"

[PTR (OS/2 Pointer)]
if:({s:0,2}="PT")&({_d:2}={filesize})
convert="bin\deark.exe" -m os2bmp -t "{tempfile}" "{file}"

[PWC (Piecewise-Constant Image Model)]
if:{s:0,4}="4yVa"
convert="bin\pwcdecode.exe" "{file}" "{tempfolder}\temp.bmp" && "bin\magick.exe" convert bmp:"{tempfolder}\temp.bmp" "{tempfile}" && cmd.exe /C del "{tempfolder}\temp.bmp"

[PXA (Pixia)]
if:{s:0,5}="Pixia"
convert="bin\NConvert\nconvert.exe" -in pxa -out png -o "{tempfile}" "{file}"

[PZL (X11 Puzzle bitmap)]
if:{filesize}=({d:0}*{d:4})+({b:8}*3)+9
convert="bin\NConvert\nconvert.exe" -in pzl -out png -o "{tempfile}" "{file}"

[QTIF/QIF (QuickTime Image Format)]
if:(({s:4,4}="idat")&({s:{d:0}+4,4}="idsc"))|({s:4,4}="idsc")
unpack="bin\deark.exe" -m qtif -o "{tempfolder}\image" "{file}"

[QOI (Quite OK Image Format)]
if:{s:0,4}="qoif"
convert="bin\magick.exe" qoi:"{file}" "{tempfile}"

[RAF (Fujifilm Raw)]
if:{s:0,15}="FUJIFILMCCD-RAW"
convert="bin\magick.exe" raf:"{file}" "{tempfile}"

[RAW/HST (Image Alchemy HSI Raw)]
if:{s:0,6}="mhwanh"
convert="bin\NConvert\nconvert.exe" -in hsi -out png -o "{tempfile}" "{file}"

[RAW/QRT/DIS (QRT Ray Tracer)]
if:{filesize}=({_w:0}*{_w:2}*3)+({_w:2}*2)+4
convert="bin\NConvert\nconvert.exe" -in qrt -out png -o "{tempfile}" "{file}"

[RGH (Atari ST ZZ_ROUGH)]
if:{s:0,12}="(c)F.MARCHAL"
convert="bin\NConvert\nconvert.exe" -in zzrough -out png -o "{tempfile}" "{file}"

[RIX (ColoRIX)]
if:{s:0,4}="RIX3"
convert="bin\NConvert\nconvert.exe" -in rix -out png -o "{tempfile}" "{file}"

[RLA (Wavefront Advanced Visualizer)]
if:((((({w:6}+1)-{w:4})*4)+740)={d:$2E4})|((((({w:$E}+1)-{w:$C})*4)+740)={d:$2E4})|({s:$244,3}="rgb")
convert="bin\magick.exe" rla:"{file}" "{tempfile}"

[RLE (Utah Raster Toolkit)]
if:{w:0}=$52CC
convert="bin\magick.exe" rle:"{file}" "{tempfile}"

[RP (C64 Rainbow Painter)]
if:({filesize}=10242)&({_w:0}=$5C00)
convert="bin\NConvert\nconvert.exe" -in rp -out png -o "{tempfile}" "{file}"

[RSC (Atari ST GEM Resource)]
if:(({w:$22}-{w:$12}={w:$16}*4)&({w:$22}*{w:$12}>0))|({filesize}={w:$22})
unpack="bin\deark.exe" -m rsc -o "{tempfolder}\rsc" "{file}"

[SAR (C64 Saracen Paint)]
if:({_w:0}=$7800)&({filesize}=10018)
convert="bin\NConvert\nconvert.exe" -in sar -out png -o "{tempfile}" "{file}"

[SC2 (MSX Screen 2)]
if:(({filesize}=16391)&({d:0}=$FE0000FF))|(({filesize}=14343)&({d:0}=$FE000000))
convert="bin\NConvert\nconvert.exe" -in msx2 -out png -o "{tempfile}" "{file}"

[SCR/MWG (Microsoft Word Screen Capture)]
if:{t:0}=$CD0501
convert="bin\deark.exe" -m mswordscr -t "{tempfile}" "{file}"

[SCR (ZX Spectrum Screen)]
if:{filesize}=6912
convert="bin\NConvert\nconvert.exe" -in zxscr -out png -o "{tempfile}" "{file}"

[SCT (Scitex Continuous Tone)]
if:{s:$50,2}="CT"
convert="bin\magick.exe" sct:"{file}" "{tempfile}"

[SD0/SD1/SD2 (Atari ST Dali)]
if:{filesize}=32128
convert="bin\NConvert\nconvert.exe" -in dali -out png -o "{tempfile}" "{file}"

[SFW (Seattle FilmWorks)]
if:({s:0,6}="SFW93A")|({s:0,6}="SFW94A")|({s:0,6}="SFW98A")
convert="bin\magick.exe" sfw:"{file}" "{tempfile}"

[SGI/BW/RGB (Silicon Graphics IRIX RGB)]
if:{w:0}=$1DA
convert="bin\magick.exe" sgi:"{file}" "{tempfile}"

[SHG/MRB (Segmented Hypergraphics)]
if:(({w:0}=$6C70)|({w:0}=$6C50))&({_w:2}>1)
unpack="bin\deark.exe" -m shg -o "{tempfolder}\shg" "{file}"

[SHG/MRB (Segmented Hypergraphics)]
if:(({w:0}=$6C70)|({w:0}=$6C50))&({_w:2}=1)&({b:{_d:4}}=8)
convert="bin\deark.exe" -m shg -t "{tempfolder}\temp.wmf" "{file}" && "bin\NConvert\nconvert.exe" -in wmf -out png -o "{tempfile}" "{tempfolder}\temp.wmf"

[SHG/MRB (Segmented Hypergraphics)]
if:(({w:0}=$6C70)|({w:0}=$6C50))&({_w:2}=1)&({b:{_d:4}}=6)
convert="bin\deark.exe" -m shg -t "{tempfolder}\temp.bmp" "{file}" && "bin\deark.exe" -t "{tempfile}" "{tempfolder}\temp.bmp"

[SHG/MRB (Segmented Hypergraphics)]
if:(({w:0}=$6C70)|({w:0}=$6C50))&({_w:2}=1)&({b:{_d:4}}=5)
convert="bin\deark.exe" -m shg -t "{tempfile}" "{file}"

[SHP+SDR (PrintMaster Shape)]
if:{d:0}=$B345800
unpack="bin\deark.exe" -m printmaster -o "{tempfolder}\shp" "{file}" -file2 "{filenoext}.sdr"

[SID (MrSID)]
if:{s:0,4}="msid"
convert="bin\NConvert\nconvert.exe" -in sid -out png -o "{tempfile}" "{file}"

[SIR (BYU-MERS SIR)]
if:((({w:0}*{w:2}*2)+512)\512)*512={filesize}
convert="bin\NConvert\nconvert.exe" -in byusir -out png -o "{tempfile}" "{file}"

[SPU (Atari ST Spectrum 512)]
if:{filesize}=51104
convert="bin\NConvert\nconvert.exe" -in spu -out png -o "{tempfile}" "{file}"

[SUN/RAS (Sun Raster)]
if:{d:0}=$59A66A95
convert="bin\magick.exe" sun:"{file}" "{tempfile}"

[TAP (Oric Hires Screen; Tape Format)]
if:{t:0}=$161616
convert="bin\NConvert\nconvert.exe" -in otap -out png -o "{tempfile}" "{file}"

[TG1 (Atari Falcon COKE)]
if:{s:0,12}="COKE format."
convert="bin\deark.exe" -m coke -t "{tempfile}" "{file}"

[THN (Graphic Workshop Thumbnail)]
if:{s:0,4}="THNL"
convert="bin\deark.exe" -m gws_thn -t "{tempfile}" "{file}"

[TIM (Sony PlayStation)]
if:{d:0}=$10000000
convert="bin\magick.exe" tim:"{file}" "{tempfile}"

[TNY/TN1/TN2/TN3 (Atari ST Tiny Stuff)]
if:{filesize}=({w:$23}*2)+{w:$21}+37
convert="bin\NConvert\nconvert.exe" -in tiny -out png -o "{tempfile}" "{file}"

[TRP (Atari Falcon EggPaint)]
if:{s:0,4}="TRUP"
convert="bin\NConvert\nconvert.exe" -in trup -out png -o "{tempfile}" "{file}"

[TRU (Atari Falcon IndyPaint)]
if:{s:0,4}="Indy"
convert="bin\deark.exe" -m indypaint -t "{tempfile}" "{file}"

[VBM (C64/128 VDC Bitmap)]
if:{d:0}=$424DCB02
convert="bin\deark.exe" -m vbm -t "{tempfile}" "{file}"

[VICAR/IMG (Video Image Communication And Retrieval)]
if:{s:0,7}="LBLSIZE"
convert="bin\magick.exe" vicar:"{file}" "{tempfile}"

[VID (C64 Vidcom 64)]
if:({_w:0}=$5800)&({filesize}=10050)
convert="bin\NConvert\nconvert.exe" -in vid -out png -o "{tempfile}" "{file}"

[VIFF/XV (Khoros Visualization)]
if:{w:0}=$AB01
convert="bin\magick.exe" viff:"{file}" "{tempfile}"

[VOB (Vue d'Espirit thumbnail)]
if:{s:0,12}="Vue d'Esprit"
convert="bin\NConvert\nconvert.exe" -in vob -out png -o "{tempfile}" "{file}"

[VOLLABEL (Apple Volume Label)]
if:({b:0}=1)&({w:3}=12)&({filesize}=({w:1}*12)+5)
convert="bin\deark.exe" -m applevol -t "{tempfile}" "{file}"

[WAD (Half-Life WAD3)]
if:{s:0,4}="WAD3"
unpack="bin\NConvert\nconvert.exe" -in wad -out png -o "{tempfolder}\image###.png" -xall "{file}"

[WAL (Quake II Texture)]
if:{filesize}=(({_d:$20}*{_d:$24})/64)+{_d:$34}
convert="bin\NConvert\nconvert.exe" -in wal -out png -o "{tempfile}" "{file}"

[WBC/WB1 (Webshots)]
if:({d:0}=$AB16FA95)|({s:0,4}="WWBB")
convert="bin\NConvert\nconvert.exe" -in wbc -out png -o "{tempfile}" "{file}"

[WBMP (Wireless Application Protocol Bitmap)]
if:({filesize}=(({b:2}\8)*{b:3})+4)|({filesize}=((((({b:2}&$7F)<<7)+{b:3})\8)*((({b:4}&$7F)<<7)+{b:5}))+6)
convert="bin\NConvert\nconvert.exe" -in wbmp -out png -o "{tempfile}" "{file}"

[WEBP (Google WebP)]
if:({s:0,4}="RIFF")&({s:8,4}="WEBP")
convert="bin\magick.exe" webp:"{file}" "{tempfile}"

[WZL (Winzle Puzzle)]
if:{w:0}=$4F40
convert="bin\NConvert\nconvert.exe" -in wzl -out png -o "{tempfile}" "{file}"

[X3F (Sigma/Foveon Raw)]
if:{s:0,4}="FOVb"
convert=cmd.exe /C copy "{file}" "{tempfolder}\temp.x3f" && "bin\x3f_extract.exe" -o "{tempfolder}" "{tempfolder}\temp.x3f" && "bin\magick.exe" "{tempfolder}\temp.x3f.dng"[0] "{tempfile}"

[XB (Extended Binary)]
if:{s:0,4}="XBIN"
convert="bin\deark.exe" -m xbin -t "{tempfile}" "{file}"

[XBM (X Window System Bitmap)]
if:({s:0,9}="/* XBM */")|({s:0,7}="#define")
convert="bin\magick.exe" xbm:"{file}" "{tempfile}"

[XGA (Atari Falcon TrueColor Screen)]
if:({filesize}=153600)|({filesize}=368640)
convert="bin\deark.exe" -m falcon_xga -t "{tempfile}" "{file}"

[XIF (Xerox Image File Format)]
if:({s:0,3}="II*")&({find:4,$20,"XEROX DIFF"}>-1)
convert="bin\NConvert\nconvert.exe" -in xif -out png -o "{tempfile}" "{file}"

[XIMG/IMG (GEM Raster)]
if:{s:$10,4}="XIMG"
convert="bin\NConvert\nconvert.exe" -in gem -out png -o "{tempfile}" "{file}"

[XPM/PICON (X Window System Pixmap)]
if:{s:0,9}="/* XPM */"
convert="bin\NConvert\nconvert.exe" -in xpm -out png -o "{tempfile}" "{file}"

[XWD (X Window System Window Dump)]
if:({d:4}=7)&({d:8}<=2)&({t:$C}=0)&({d:$C}={d:$2C})
convert="bin\NConvert\nconvert.exe" -in xwd -out png -o "{tempfile}" "{file}"

[XYZ (RPG Maker 2000)]
if:{s:0,4}="XYZ1"
convert="bin\NConvert\nconvert.exe" -in xyz -out png -o "{tempfile}" "{file}"

[YP (Young Picasso)]
if:{d:0}=$50000050
convert="bin\deark.exe" -m young_picasso -t "{tempfile}" "{file}"

[ZBR (Zoner Zebra Metafile thumbnail)*]
if:{w:0}=$9A02
convert="bin\NConvert\nconvert.exe" -in zbr -out png -o "{tempfile}" "{file}"

[BMP (Windows Bitmap)]
if:{s:0,2}="BM"
convert="bin\deark.exe" -m bmp -t "{tempfile}" "{file}"

[TIFF/TIF (Tag Image File Format)]
if:({s:0,3}="II*")|({d:0}=$4D4D002A)
convert="bin\magick.exe" "{file}"[0] "{tempfile}"



--- Animation formats ---

[ANI (Atari ST NEOchrome Animation)]
if:{d:0}=$BABEEBEA
unpack="bin\deark.exe" -m neochrome_ani -o "{tempfolder}\frame" "{file}"

[ANI (Windows Animated Cursor)]
if:({s:0,4}="RIFF")&({s:8,4}="ACON")
unpack="bin\NConvert\nconvert.exe" -in ani -out png -o "{tempfolder}\cursor###.png" -xall "{file}"

[ANIM (Amiga Animation)]
if:({s:0,4}="FORM")&({s:8,4}="ANIM")
unpack="bin\deark.exe" -m anim -o "{tempfolder}\frame" "{file}"

[APNG (Animated Portable Network Graphics)]
if:({s:1,3}="PNG")&({find:$25,$80,"acTL"}>-1)
unpack="bin\deark.exe" -m png -o "{tempfolder}\frame" "{file}"

[AVIF (AV1 Image File Format; Animated)]
if:{s:4,8}="ftypavis"
unpack="{thisfolder}\bin\avifdec.bat" "{file}" "{tempfolder}"

[FLIC/FLI/FLC (Autodesk Animator)]
if:({w:4}=$11AF)|({w:4}=$12AF)
convert="bin\NConvert\nconvert.exe" -in fli -out png -o "{tempfile}" "{file}"
unpack="bin\NConvert\nconvert.exe" -in fli -out png -o "{tempfolder}\frame###.png" -xall "{file}"

[FLIF (Free Lossless Image Format)]
if:{s:0,4}="FLIF"
unpack="bin\flif.exe" -d "{file}" "{tempfolder}\frame.png"

[FLM (Atari Animatic Film)]
if:{d:$30}=$27182818
unpack="bin\deark.exe" -m animatic -o "{tempfolder}\frame" "{file}"

[FLM/VID/VSQ (Atari ST/Amiga Video Master Film)]
if:{s:0,4}="VMAS"
unpack="bin\deark.exe" -m videomaster -o "{tempfolder}\frame" "{file}"

[GIF (Graphics Interchange Format)]
if:{s:0,4}="GIF8"
unpack="bin\magick.exe" gif:"{file}" "{tempfolder}\frame.png"
convert="bin\magick.exe" gif:"{file}"[0] "{tempfile}"

[GL (Graphics Animation System for Professionals)]
if:{_d:$13}-{_d:2}-4={_d:{_d:2}}
unpack="bin\deark.exe" -m graspgl -o "{tempfolder}\gl" "{file}"

[MNG (Multiple-image Network Graphics)]
if:{s:1,3}="MNG"
unpack="bin\magick.exe" mng:"{file}" "{tempfolder}\frame.png"

[NIE/NII (Naïve Image Formats)]
if:({d:0}=$6EC3AF41)|({d:0}=$6EC3AF49)
unpack="bin\deark.exe" -m nie -o "{tempfolder}\frame" "{file}"

[PGX (Atari Portfolio Graphics Animation)]
if:{s:0,3}="PGX"
unpack="bin\deark.exe" -m pgx -o "{tempfolder}\frame" "{file}"



--- Vector formats ---

[AI (Adobe Illustrator)*]
if:({s:0,10}="%!PS-Adobe")&({s:{filesize}-$B,4}="exec")
convert="bin\NConvert\nconvert.exe" -in ai -out png -o "{tempfile}" "{file}"

[EPS (Encapsulated PostScript)]
if:({d:0}=$C5D0D3C6)|({s:$F,5}="EPSF-")
convert="bin\gswin64c.exe" -dSAFER -dNOPAUSE -dBATCH -sDEVICE=pngalpha -r150 -sOutputFile="{tempfile}" "{file}"

[MVG (Magick Vector Graphics)]
if:{s:0,4}="push"
convert="bin\magick.exe" mvg:"{file}" "{tempfile}"

[PES (Embroidery file)]
if:{s:0,4}="#PES"
convert="bin\magick.exe" convert pes:"{file}" "{tempfile}"

[PS (Adobe PostScript)]
if:({s:0,10}="%!PS-Adobe")&({s:{filesize}-$B,4}<>"exec")
convert="bin\gswin64c.exe" -dSAFER -dNOPAUSE -dBATCH -sDEVICE=pngalpha -r150 -sOutputFile="{tempfile}" "{file}"

[SLB (AutoCAD Slide Library)]
if:{s:0,21}="AutoCAD Slide Library"
unpack="bin\deark.exe" -m autocad_slb -o "{tempfolder}\slide" "{file}"

[SVG (Scalable Vector Graphics)]
if:({s:0,5}="<?xml")&({find:0,$100,"<svg"}>-1)
convert="bin\magick.exe" convert svg:"{file}" "{tempfile}"



--- Raster-vector formats ---

[EMF (Enhanced Metafile)]
if:({d:0}=$1000000)&({s:$28,4}=" EMF")
convert="bin\NConvert\nconvert.exe" -in emf -out png -o "{tempfile}" "{file}"

[PICT/PIC (Apple Macintosh QuickDraw/PICT)]
if:(({w:$20A}=$1101)|({d:$20A}=$1102ff)|({w:$A}=$1101)|({d:$A}=$1102ff))&({b:{filesize}-1}=$FF)
convert="bin\magick.exe" pict:"{file}" "{tempfile}"
unpack="bin\NConvert\nconvert.exe" -in pict -out png -o "{tempfolder}\image###.png" -xall "{file}"

[PSB (Adobe Photoshop Large Document Format)]
if:({s:0,4}="8BPS")&({w:4}=2)
convert="bin\magick.exe" psb:"{file}"[0] "{tempfile}"

[PSD (Adobe Photoshop)]
if:({s:0,4}="8BPS")&({w:4}=1)
unpack="bin\magick.exe" psd:"{file}" "{tempfolder}\layer.png"
convert="bin\magick.exe" psd:"{file}"[0] "{tempfile}"

[PSP (Jasc PaintShop Pro)]
if:{s:0,14}="Paint Shop Pro"
convert="bin\NConvert\nconvert.exe" -in psp -out png -o "{tempfile}" "{file}"

[WMF (Windows Metafile)]
if:({d:0}=$1000900)|(({d:$16}=$1000900)&({d:0}=$D7CDC69A))
convert="bin\NConvert\nconvert.exe" -in wmf -out png -o "{tempfile}" "{file}"

[WPG (WordPerfect Graphics)]
if:{s:1,3}="WPC"
convert="bin\magick.exe" wpg:"{file}" "{tempfile}"

[XCF (GIMP Experimental Computing Facility)]
if:{s:0,8}="gimp xcf"
convert="bin\magick.exe" xcf:"{file}"[0] "{tempfile}"



--- 3D model formats ---

[STL (Stereolithography)]
if:(({_d:$50}*50)+$54={filesize})|({s:0,6}="solid ")
convert="bin\stl-thumb.exe" "{file}" "{tempfile}"



--- Document formats ---

[CRD (Microsoft Cardfile)]
if:({s:0,3}="MGC")|({s:0,3}="RRG")
unpack="bin\deark.exe" -m cardfile -o "{tempfolder}\card" "{file}"

[PDF (Portable Document Format)]
if:{s:1,3}="PDF"
unpack="bin\gswin64c.exe" -dSAFER -dNOPAUSE -dBATCH -sDEVICE=pngalpha -r150 -sOutputFile="{tempfolder}\%03d.png" "{file}" && "bin\pdfimages.exe" -j "{file}" "{tempfolder}\embedded"



--- Font formats ---

[FNT/GFT (GEM Bitmap Font)]
if:{s:$3E,4}="UUUU"
convert="bin\deark.exe" -m gemfont -t "{tempfile}" "{file}"

[FNT (Windows Font)]
if:({w:0}>=1)&({w:0}<=3)&({filesize}={_d:2})&({b:$42}=0)
convert="bin\deark.exe" -m fnt -t "{tempfile}" "{file}"

[HEX (GNU Unifont)]
if:({s:0,2}="00")&({b:4}=$3A)
convert="bin\deark.exe" -m unifont_hex -t "{tempfile}" "{file}"

[OTF (OpenType Font)]
if:{s:0,4}="OTTO"
convert="bin\magick.exe" ttf:"{file}" "{tempfile}"

[PCF (X11 Portable Compiled Format)]
if:{s:1,3}="fcp"
convert="bin\deark.exe" -m pcf -t "{tempfile}" "{file}"

[PCR (OPTIKS Font)]
if:({s:0,3}="KPG")&({b:5}=$20)
convert="bin\deark.exe" -m pcrfont -t "{tempfile}" "{file}"

[PFA (Adobe Type 1 ASCII)]
if:({s:0,10}="%!FontType")|({s:0,14}="%!PS-AdobeFont")
convert="bin\magick.exe" pfa:"{file}" "{tempfile}"

[PFB (Adobe Type 1 Binary)]
if:({s:6,10}="%!FontType")|({s:6,14}="%!PS-AdobeFont")
convert="bin\magick.exe" pfb:"{file}" "{tempfile}"

[PFF2 (PUPA Font Format)]
if:({s:0,4}="FILE")&({s:8,4}="PFF2")
convert="bin\deark.exe" -m pff2 -t "{tempfile}" "{file}"

[PK (Packed Font)]
if:{w:0}=$F759
convert="bin\deark.exe" -m pkfont -t "{tempfile}" "{file}"

[PSF (PC Screen Font)]
if:({w:0}=$3604)|({d:0}=$72b54a86)
convert="bin\deark.exe" -m psf -t "{tempfile}" "{file}"

[SET (GRASP Font)]
if:({_w:0}={filesize})&((({b:4}R8)*{b:5})/8={b:6})
convert="bin\deark.exe" -m graspfont -t "{tempfile}" "{file}"

[TTF (TrueType Font)]
if:({d:0}=$10000)&({w:$A}=({w:4}*16)-{w:6})&({w:4}*{w:6}*{w:8}<>0)
convert="bin\magick.exe" ttf:"{file}" "{tempfile}"



--- Archive formats ---

[$ (EDI Install Pack)]
if:{s:0,7}="EDILZSS"
unpack="bin\deark.exe" -m edi_pack -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[7Z (7-Zip Archive)]
if:({s:0,2}="7z")&({d:2}=$BCAF271C)
unpack="bin\7za.exe" x -p -o"{tempfolder}" "{file}"

[A (Unix Ar)]
if:{s:0,7}="!<arch>"
unpack="bin\deark.exe" -m ar -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[ABK (AMOS AmBs Bank)]
if:{s:0,4}="AmBs"
unpack="bin\deark.exe" -m abk -o "{tempfolder}\abk" "{file}"

[ARC (RISC OS ArcFS)]
if:{s:0,7}="Archive"
unpack="bin\deark.exe" -m arcfs -o "{tempfolder}\arc" "{file}"

[ARC (System Enhancement Associates)]
if:({b:0}=$1A)&({w:{filesize}-2}=$1A00)
unpack="bin\deark.exe" -m arc -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[ARJ (Archived by Robert Jung)]
if:{w:0}=$60EA
unpack="bin\deark.exe" -m arj -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[BIN (MacBinary)]
if:{s:$66,4}="mBIN"
unpack="bin\deark.exe" -m macbinary -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[BIN (RISC OS PackDir)]
if:{s:0,4}="PACK"
unpack="bin\deark.exe" -m packdir -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[BIN (RISC OS Squash)]
if:{s:0,4}="SQSH"
unpack="bin\deark.exe" -m squash -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[BZ2 (bzip2 Archive)]
if:{s:0,3}="BZh"
unpack="bin\7za.exe" x -o"{tempfolder}" "{file}"

[CAB (Microsoft Cabinet)]
if:{s:0,4}="MSCF"
unpack="bin\7za.exe" x -o"{tempfolder}" "{file}"

[CFB (Microsoft Compound File Binary)]
if:({d:0}=$D0CF11E0)&({s:$400,10,2}="Root Entry")
unpack="bin\deark.exe" -m cfb -opt cfb:extractstreams -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[CPIO (Unix cpio)]
if:({w:0}=$71C7)|({w:0}=$C771)|({s:0,4}="0707")
unpack="bin\deark.exe" -m cpio -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[DSK (LoadDskF/SaveDskF)]
if:({w:0}=$AA58)|({w:0}=$AA59)
unpack="bin\deark.exe" -m loaddskf -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[DSK (LoadDskF/SaveDskF; Compressed)]
if:{w:0}=$AA5A
unpack="bin\deark.exe" -m loaddskf -t "{tempfolder}\temp.dsk" "{file}" && "bin\deark.exe" -m loaddskf -od "{tempfolder}" "{tempfolder}\temp.dsk" && cmd.exe /C del "{tempfolder}\temp.dsk" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[EX$/DL$ (NPack)]
if:{s:0,5}="MSTSM"
unpack="bin\deark.exe" -m npack -t "{tempfolder}\{filenameonly}.bin" "{file}"

[EX_ (InstallShield Installer Archive)]
if:{d:0}=$2AAB79D8
unpack="bin\deark.exe" -m is_instarch -t "{tempfolder}\{filenameonly}.bin" "{file}"

[EX_/DL_ (Microsoft Installation Compression)]
if:({s:0,4}="SZDD")|({s:0,4}="KWAJ")|({s:0,3}="SZ ")
unpack="bin\deark.exe" -m mscompress -t "{tempfolder}\{filenameonly}.bin" "{file}"

[EXE (PKLITE)]
if:({s:38,8}="PK Copyr")|({find:30,72,"PKlite"}>-1)|({find:30,52,"PKLITE"}>-1)
unpack="bin\deark.exe" -m pklite -t "{tempfolder}\{filenameonly}.exe" "{file}"

[GX (Genus Microprogramming GX Library)]
if:({w:0}=$1CA)&({s:2,19}="Copyright (c) Genus")
unpack="bin\deark.exe" -m gxlib -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[GZ (gzip Archive)]
if:{w:0}=$1F8B
unpack="bin\7za.exe" x -o"{tempfolder}" "{file}"

[HQX (BinHex)]
if:{find:0,$A00,"(This file must be"}>-1
unpack="bin\deark.exe" -m binhex -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[IBT (InstallShield Archive)]
if:{find:$20,$40,"SZDD"}>-1
unpack="bin\deark.exe" -m is_ibt -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[LBR (Gary P. Novosielski Library)]
if:({b:0}=0)&({s:1,11}="           ")&({w:$C}=0)&({w:$E}>0)
unpack="bin\deark.exe" -m lbr -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[LHA/LZA (LHarc)]
if:({s:2,3}="-lh")|({s:2,3}="-lx")|({s:2,3}="-lz")|({s:2,3}="-pm")
unpack="bin\lha.exe" -xw="{tempfolder}" "{file}"

[LIB/CMP/EX$/DL$/$$$/PAK (The Stirling Compressor)]
if:{d:0}=$655D138C
unpack="bin\deark.exe" -m tscomp -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[MD (MDCD)]
if:{s:0,4}="MDmd"
unpack="bin\deark.exe" -m mdcd -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[PCL (PCX Library)]
if:{s:0,6}="pcxLib"
unpack="bin\deark.exe" -m pcxlib -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[PQA (Palm Query Application)]
if:{s:$3C,8}="pqa clpr"
unpack="bin\deark.exe" -m palmdb -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[PRC (Palm Resource)]
if:{s:$3C,4}="appl"
unpack="bin\deark.exe" -m palmdb -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[QIP (Quarterdeck Installation Package)]
if:(({s:0,2}="QP")&({w:8}=$200))|(({s:0,2}="QD")&({w:8}=$100))
unpack="bin\deark.exe" -m qip -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[QQQ/EQE/SQ (CP/M Squeeze)]
if:{w:0}=$76FF
unpack="bin\deark.exe" -m squeeze -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[RAR (Roshal Archive/WinRAR)]
if:{s:0,4}="Rar!"
unpack="bin\UnRAR.exe" x -p[password] "{file}" "{tempfolder}"

[RPM (Red Hat Package Manager)]
if:{d:0}=$EDABEEDB
unpack="bin\deark.exe" -m rpm -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[SHR (PC-Shrink)]
if:({d:0}+{d:4}+{d:8}=0)&(({w:$C}=$74)|({d:$C}=$7400))
unpack="bin\deark.exe" -m pcshrink -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[SIS (EPOC/Symbian OS SOftware Installation Script)]
if:({d:4}=$6D000010)|({d:4}=$123A0010)
unpack="bin\deark.exe" -m sis -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[SIT (Macintosh StuffIt)]
if:({s:0,4}="SIT!")|({s:$80,4}="SIT!")
unpack="bin\deark.exe" -m stuffit -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[TAR (Tape Archive)]
if:({s:$101,5}="ustar")|({s:$1FC,3}="tar")
unpack="bin\7za.exe" x -o"{tempfolder}" "{file}"

[WAD (Doom)]
if:({s:0,4}="PWAD")|({s:0,4}="IWAD")
unpack="bin\deark.exe" -maxfiles 10000 -m wad -o "{tempfolder}\wad" "{file}" 

[WIM (Windows Imaging Format)*]
if:{s:0,5}="MSWIM"
unpack="bin\7za.exe" x -o"{tempfolder}" "{file}"

[XZ (Tukaani XZ Archive)]
if:{s:1,4}="7zXZ"
unpack="bin\7za.exe" x -o"{tempfolder}" "{file}"

[YYY (CrLZH)]
if:{w:0}=$76FD
unpack="bin\deark.exe" -m crlzh -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[Z (InstallShield Z Archive)]
if:{d:0}=$135D658C
unpack="bin\deark.exe" -m is_z -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[Z (SCO Unix compress)]
if:{w:0}=$1FA0
unpack="bin\deark.exe" -m compress_lzh -t "{tempfolder}\{filenameonly}.bin" "{file}"

[Z (Unix compress)*]
if:{w:0}=$1F9D
unpack="bin\7za.exe" x -o"{tempfolder}" "{file}"

[ZIP (PKWare ZIP Archive)]
if:{s:0,2}="PK"
unpack="bin\7za.exe" x -p -o"{tempfolder}" "{file}"

[ZOO (Zoo Archive)]
if:{s:0,4}="ZOO "
unpack="bin\deark.exe" -m zoo -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[ZZZ (Crunch)]
if:{w:0}=$76FE
unpack="bin\deark.exe" -m crunch -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"



--- Disk/disc image formats ---

[ADF (Amiga Disk Format)]
if:{s:0,3}="DOS"
unpack="bin\deark.exe" -m amiga_adf -o "{tempfolder}\adf" "{file}"

[ATR (Atari Disk Image)]
if:({w:0}=$9602)&({filesize}=({_w:2}*16)+16)
unpack="bin\deark.exe" -m atr -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[BIN/IMG (Raw Binary CD-ROM Image)]
if:({s:$9311,5}="CD001")|({s:$9319,5}="CD001")
unpack="bin\deark.exe" -m cd_raw -t "{tempfolder}\temp.iso" "{file}" && "bin\deark.exe" -maxfiles 10000 -m iso9660 -od "{tempfolder}" "{tempfolder}\temp.iso" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }" && cmd.exe /C del "{tempfolder}\temp.iso"

[D64 (C64 1541 Disk Image)]
if:{filesize}=$2AB00
unpack="bin\deark.exe" -m d64 -od "{tempfolder}\d64" "{file}"

[DMS (Amiga Disk Masher System)]
if:{s:0,4}="DMS!"
unpack="bin\deark.exe" -m amiga_dms -t "{tempfolder}\temp.adf" "{file}" && "bin\deark.exe" -m amiga_adf -o "{tempfolder}\adf" "{tempfolder}\temp.adf" && cmd.exe /C del "{tempfolder}\temp.adf"

[HFS (Apple Hierarchical File System)]
if:{s:$400,2}="BD"
unpack="bin\deark.exe" -maxfiles 10000 -m hfs -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[ISO (Apple Partition Map)]
if:({s:0,2}="ER")&({s:$200,2}="PM")&({s:$8001,5}<>"CD001")
unpack="bin\deark.exe" -m apm -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[ISO (ISO 9660 CD-ROM)]
if:{s:$8001,5}="CD001"
unpack="bin\deark.exe" -maxfiles 10000 -m iso9660 -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[MOOF (Macintosh Disk Image)]
if:{s:0,4}="MOOF"
unpack="bin\deark.exe" -m moof -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[MSA (Atari ST Magic Shadow Archiver)]
if:{w:0}=$E0F
unpack="bin\deark.exe" -m msa -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[NRG (Nero Burning ROM)]
if:({s:{filesize}-8,4}="NERO")|({s:{filesize}-12,4}="NER5")
unpack="bin\deark.exe" -m nrg -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[STX (Atari ST Pasti)]
if:{s:0,3}="RSY"
unpack="bin\deark.exe" -m pasti -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"

[WOZ (Apple II WOZ Disk Image)]
if:{s:0,3}="WOZ"
unpack="bin\deark.exe" -m woz -od "{tempfolder}" "{file}" && powershell -Command "Get-ChildItem -Path '{tempfolder}' | Rename-Item -NewName { $_.Name -replace '^output\.\d{3,4}\.', '' }"



--- Audio formats ---

[8SVX/IFF (Amiga 8-Bit Sampled Voice Interchange File Format)]
if:({s:0,4}="FORM")&({s:8,4}="8SVX")
audio="bin\ffmpeg.exe" -i "{file}" "{tempwav}"

[AAC/M4A (Advanced Audio Coding; MPEG-4 Container)]
if:{s:4,7}="ftypM4A"
audio="bin\ffmpeg.exe" -i "{file}" "{tempwav}"

[AAC (Advanced Audio Coding)]
if:{w:0}=$FFF9
audio="bin\ffmpeg.exe" -i "{file}" "{tempwav}"

[AAC (Advanced Audio Coding; ID3 Tag)]
if:({s:0,3}="ID3")&({w:(({d:6}&$7F)+(({d:6}&$7F00)>>1)+(({d:6}&$7F0000)>>2)+(({d:6}&$7F000000)>>3))+10}=$FFF9)
unpack="bin\mp3artex.exe" "{file}" "{tempfolder}"
audio="bin\ffmpeg.exe" -i "{file}" "{tempwav}"

[AC3 (Dolby Digital Audio Codec 3)]
if:{w:0}=$B77
audio="bin\ffmpeg.exe" -i "{file}" "{tempwav}"

[AIFF/AIF/AFF (Audio Interchange File Format)]
if:({s:0,4}="FORM")&({s:8,4}="AIFF")
audio=open

[AIFC/AIF (Audio Interchange File Format Compressed)]
if:({s:0,4}="FORM")&({s:8,4}="AIFC")
audio="bin\ffmpeg.exe" -i "{file}" "{tempwav}"

[AMR/3GA (Adaptive Multi-Rate Audio)]
if:{s:0,5}="#!AMR"
audio="bin\ffmpeg.exe" -i "{file}" "{tempwav}"

[APE (Monkey's Audio)]
if:{s:0,4}="MAC "
audio="bin\ffmpeg.exe" -i "{file}" "{tempwav}"

[DSF/DFF (Sony/Philips Direct Stream Digital)]
if:{s:0,3}="DSD"
audio="bin\ffmpeg.exe" -i "{file}" "{tempwav}"

[FLAC (Free Lossless Audio Codec)]
if:{s:0,4}="fLaC"
unpack="bin\mp3artex.exe" "{file}" "{tempfolder}"
audio=open

[ISS (Funcom IMA ADPCM)]
if:{s:0,15}="IMA_ADPCM_Sound"
audio="bin\ffmpeg.exe" -i "{file}" "{tempwav}"

[IT (Impulse Tracker Module)]
if:{s:0,4}="IMPM"
audio=open

[MOD (Amiga Module)]
if:{s:$438,4}="M.K."
audio=open

[MP1 (MPEG-1 Audio Layer I)]
if:{w:0}|1=$FFF7
audio=open

[MP1 (MPEG-2 Audio Layer I)]
if:{w:0}|1=$FFFF
audio=open

[MP2/MPA (MPEG-1 Audio Layer II)]
if:{w:0}|1=$FFFD
audio=open

[MP2/MPA (MPEG-1 Audio Layer II; ID3 Tag)]
if:({s:0,3}="ID3")&({w:(({d:6}&$7F)+(({d:6}&$7F00)>>1)+(({d:6}&$7F0000)>>2)+(({d:6}&$7F000000)>>3))+10}|1=$FFFD)
unpack="bin\mp3artex.exe" "{file}" "{tempfolder}"
audio=open

[MP2/MPA (MPEG-2 Audio Layer II)]
if:{w:0}|1=$FFF5
audio=open

[MP2/MPA (MPEG-2 Audio Layer II; ID3 Tag)]
if:({s:0,3}="ID3")&({w:(({d:6}&$7F)+(({d:6}&$7F00)>>1)+(({d:6}&$7F0000)>>2)+(({d:6}&$7F000000)>>3))+10}|1=$FFF5)
unpack="bin\mp3artex.exe" "{file}" "{tempfolder}"
audio=open

[MP3 (MPEG-2 Audio Layer III)]
if:{w:0}|1=$FFFB
audio=open

[MP3 (MPEG-2 Audio Layer III; ID3 Tag)]
if:({s:0,3}="ID3")&({w:(({d:6}&$7F)+(({d:6}&$7F00)>>1)+(({d:6}&$7F0000)>>2)+(({d:6}&$7F000000)>>3))+10}|1=$FFFB)
unpack="bin\mp3artex.exe" "{file}" "{tempfolder}"
audio=open

[MTM (Multi Track Module)]
if:{d:0}=$4D544D10
audio=open

[OGG/OGA (Ogg Audio)]
if:({s:0,4}="OggS")&({s:$1C,4}<>"Opus")
unpack="bin\mp3artex.exe" "{file}" "{tempfolder}"
audio=open

[OPUS (Opus)]
if:{s:$1C,4}="Opus"
unpack="bin\mp3artex.exe" "{file}" "{tempfolder}"
audio="bin\ffmpeg.exe" -i "{file}" "{tempwav}"

[S3M (Scream Tracker 3 Module)]
if:{s:$2C,4}="SCRM"
audio="bin\ffmpeg.exe" -i "{file}" "{tempwav}"

[WAV (Waveform Audio)]
if:({s:0,4}="RIFF")&({s:8,4}="WAVE")
audio=open

[WV (WavPack)]
if:{s:0,4}="wvpk"
audio="bin\ffmpeg.exe" -i "{file}" "{tempwav}"

[XM (Extended Module)]
if:{s:0,15}="Extended Module"
audio=open



--- Video formats ---

[3GP/3G2 (Third Generation Partnership Project)]
if:{s:4,6}="ftyp3g"
unpack="{thisfolder}\bin\multiaudio.bat" "{file}" "{tempfolder}"
convert="bin\ffmpeg.exe" -noaccurate_seek -ss 1 -i "{file}" -frames:v 1 "{tempfile}"

[4XM (4X Technologies Movie)]
if:({s:0,4}="RIFF")&({s:8,4}="4XMV")
unpack="{thisfolder}\bin\multiaudio.bat" "{file}" "{tempfolder}"
convert="bin\ffmpeg.exe" -noaccurate_seek -ss 1 -i "{file}" -frames:v 1 "{tempfile}"

[AMV (Actions Media Video)]
if:({s:0,4}="RIFF")&({s:8,4}="AMV ")
unpack="{thisfolder}\bin\multiaudio.bat" "{file}" "{tempfolder}"
convert="bin\ffmpeg.exe" -noaccurate_seek -ss 1 -i "{file}" -frames:v 1 "{tempfile}"

[MP4/M4A/M4P/M4B/M4R/M4V (MPEG-4 Part 14)]
if:({s:4,7}="ftypmp4")|({s:4,7}="ftypiso")
unpack="{thisfolder}\bin\multiaudio.bat" "{file}" "{tempfolder}"
convert="bin\ffmpeg.exe" -noaccurate_seek -ss 1 -i "{file}" -frames:v 1 "{tempfile}"

[MTV (MTV Movie)]
if:{s:0,3}="AMV"
unpack="{thisfolder}\bin\multiaudio.bat" "{file}" "{tempfolder}"
convert="bin\ffmpeg.exe" -noaccurate_seek -ss 1 -i "{file}" -frames:v 1 "{tempfile}"

